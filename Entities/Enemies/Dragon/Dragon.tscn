[gd_scene load_steps=22 format=3 uid="uid://byrmqaqlddrrn"]

[ext_resource type="Script" path="res://Entities/Enemies/Dragon/dragon.gd" id="1_kxca4"]
[ext_resource type="PackedScene" uid="uid://cshwo6wiegxqm" path="res://Entities/Enemies/Core/beast.tscn" id="1_n3g6u"]
[ext_resource type="Script" path="res://Entities/Enemies/Dragon/States/IdleState.gd" id="2_npnky"]
[ext_resource type="Script" path="res://Entities/Enemies/Dragon/States/StompState.gd" id="4_f4a04"]
[ext_resource type="Script" path="res://Classes/hurtbox_component.gd" id="4_pakg3"]
[ext_resource type="Script" path="res://Entities/Enemies/Dragon/States/DeadState.gd" id="4_vppk3"]
[ext_resource type="Script" path="res://Entities/Enemies/Dragon/BiteState.gd" id="5_vyu4a"]
[ext_resource type="Texture2D" uid="uid://gxjrl6xw1jg5" path="res://icon.svg" id="7_7fdxh"]

[sub_resource type="Animation" id="Animation_xnciy"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("IKTargets/headTarget:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(-190, -271)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("IKTargets/headTarget/headLookAt:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, 78)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("IKTargets/footRTarget/footRLookAt:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(-205, 0)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("IKTargets/footRTarget/footRLookAt:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("IKTargets/footLTarget:position")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(-89, 15)]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("IKTargets/footLTarget:rotation")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/6/type = "value"
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/path = NodePath("IKTargets/footLTarget/footLLookAt:position")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(-187, 9)]
}
tracks/7/type = "value"
tracks/7/imported = false
tracks/7/enabled = true
tracks/7/path = NodePath("IKTargets/footLTarget/footLLookAt:rotation")
tracks/7/interp = 1
tracks/7/loop_wrap = true
tracks/7/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/8/type = "value"
tracks/8/imported = false
tracks/8/enabled = true
tracks/8/path = NodePath("IKTargets/footRTarget:position")
tracks/8/interp = 1
tracks/8/loop_wrap = true
tracks/8/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(-56, 17)]
}
tracks/9/type = "value"
tracks/9/imported = false
tracks/9/enabled = true
tracks/9/path = NodePath("IKTargets/footRTarget:rotation")
tracks/9/interp = 1
tracks/9/loop_wrap = true
tracks/9/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/10/type = "value"
tracks/10/imported = false
tracks/10/enabled = true
tracks/10/path = NodePath("HitboxComponent/Stomper:disabled")
tracks/10/interp = 0
tracks/10/loop_wrap = true
tracks/10/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/11/type = "value"
tracks/11/imported = false
tracks/11/enabled = true
tracks/11/path = NodePath("IKTargets/headTarget/headLookAt:rotation")
tracks/11/interp = 1
tracks/11/loop_wrap = true
tracks/11/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/12/type = "value"
tracks/12/imported = false
tracks/12/enabled = true
tracks/12/path = NodePath("IKTargets/headTarget:rotation")
tracks/12/interp = 1
tracks/12/loop_wrap = true
tracks/12/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="Animation" id="Animation_4x5e8"]
resource_name = "universal_idle"

[sub_resource type="Animation" id="Animation_vo41p"]
resource_name = "universal_stomp"

[sub_resource type="Animation" id="Animation_vu1bn"]
resource_name = "bite"

[sub_resource type="AnimationLibrary" id="AnimationLibrary_fhkft"]
_data = {
"RESET": SubResource("Animation_xnciy"),
"bite": SubResource("Animation_vu1bn"),
"universal_idle": SubResource("Animation_4x5e8"),
"universal_stomp": SubResource("Animation_vo41p")
}

[sub_resource type="CircleShape2D" id="CircleShape2D_krs6l"]
radius = 46.1944

[sub_resource type="SkeletonModification2DCCDIK" id="SkeletonModification2DCCDIK_qlv80"]
target_nodepath = NodePath("../IKTargets/footLTarget")
tip_nodepath = NodePath("body1/legL/shinL/footL")
ccdik_data_chain_length = 2
joint_data/0/bone_index = 9
joint_data/0/bone2d_node = NodePath("body1/legL")
joint_data/0/rotate_from_joint = false
joint_data/0/enable_constraint = true
joint_data/0/constraint_angle_min = -91.618
joint_data/0/constraint_angle_max = -17.142
joint_data/0/constraint_angle_invert = false
joint_data/0/constraint_in_localspace = true
joint_data/0/editor_draw_gizmo = true
joint_data/1/bone_index = 10
joint_data/1/bone2d_node = NodePath("body1/legL/shinL")
joint_data/1/rotate_from_joint = false
joint_data/1/enable_constraint = true
joint_data/1/constraint_angle_min = 337.959
joint_data/1/constraint_angle_max = 134.694
joint_data/1/constraint_angle_invert = true
joint_data/1/constraint_in_localspace = true
joint_data/1/editor_draw_gizmo = true

[sub_resource type="SkeletonModification2DCCDIK" id="SkeletonModification2DCCDIK_4h2w0"]
target_nodepath = NodePath("../IKTargets/footRTarget")
tip_nodepath = NodePath("body1/legR/shinR/footR")
ccdik_data_chain_length = 2
joint_data/0/bone_index = 6
joint_data/0/bone2d_node = NodePath("body1/legR")
joint_data/0/rotate_from_joint = false
joint_data/0/enable_constraint = true
joint_data/0/constraint_angle_min = -91.618
joint_data/0/constraint_angle_max = -17.142
joint_data/0/constraint_angle_invert = false
joint_data/0/constraint_in_localspace = true
joint_data/0/editor_draw_gizmo = true
joint_data/1/bone_index = 7
joint_data/1/bone2d_node = NodePath("body1/legR/shinR")
joint_data/1/rotate_from_joint = false
joint_data/1/enable_constraint = true
joint_data/1/constraint_angle_min = 337.959
joint_data/1/constraint_angle_max = 134.694
joint_data/1/constraint_angle_invert = true
joint_data/1/constraint_in_localspace = true
joint_data/1/editor_draw_gizmo = true

[sub_resource type="SkeletonModification2DLookAt" id="SkeletonModification2DLookAt_jtxv3"]
bone_index = 11
bone2d_node = NodePath("body1/legL/shinL/footL")
target_nodepath = NodePath("../IKTargets/footLTarget/footLLookAt")
enable_constraint = true
constraint_angle_min = -128.113
constraint_angle_max = 147.83
constraint_angle_invert = false
constraint_in_localspace = true

[sub_resource type="SkeletonModification2DLookAt" id="SkeletonModification2DLookAt_lprnm"]
bone_index = 8
bone2d_node = NodePath("body1/legR/shinR/footR")
target_nodepath = NodePath("../IKTargets/footRTarget/footRLookAt")
enable_constraint = true
constraint_angle_min = -128.113
constraint_angle_max = -197.642
constraint_angle_invert = false
constraint_in_localspace = true

[sub_resource type="SkeletonModification2DCCDIK" id="SkeletonModification2DCCDIK_q8npe"]

[sub_resource type="SkeletonModification2DLookAt" id="SkeletonModification2DLookAt_u62l6"]
bone_index = 5
bone2d_node = NodePath("body1/body2/neck1/neck2/neck3/head")
target_nodepath = NodePath("../IKTargets/headTarget/headLookAt")

[sub_resource type="SkeletonModificationStack2D" id="SkeletonModificationStack2D_jq6pb"]
enabled = true
modification_count = 6
modifications/0 = SubResource("SkeletonModification2DCCDIK_qlv80")
modifications/1 = SubResource("SkeletonModification2DCCDIK_4h2w0")
modifications/2 = SubResource("SkeletonModification2DLookAt_jtxv3")
modifications/3 = SubResource("SkeletonModification2DLookAt_lprnm")
modifications/4 = SubResource("SkeletonModification2DCCDIK_q8npe")
modifications/5 = SubResource("SkeletonModification2DLookAt_u62l6")

[node name="Dragon" type="Node2D"]
script = ExtResource("1_kxca4")

[node name="Beast" parent="." instance=ExtResource("1_n3g6u")]

[node name="StateMachine" parent="Beast" index="0"]
initial_state = NodePath("IdleState")

[node name="IdleState" type="Node" parent="Beast/StateMachine" index="0"]
script = ExtResource("2_npnky")

[node name="StompState" type="Node" parent="Beast/StateMachine" index="1"]
script = ExtResource("4_f4a04")
animation = "universal_stomp"

[node name="BiteState" type="Node" parent="Beast/StateMachine" index="2"]
script = ExtResource("5_vyu4a")

[node name="DeadState" type="Node" parent="Beast/StateMachine" index="3"]
script = ExtResource("4_vppk3")

[node name="AnimationPlayer" parent="Beast" index="1"]
libraries = {
"": SubResource("AnimationLibrary_fhkft")
}

[node name="Stomper" type="CollisionShape2D" parent="Beast/HitboxComponent" index="0"]
position = Vector2(-146.926, 17.7879)
rotation = 2.88471
scale = Vector2(0.999931, 0.999931)
shape = SubResource("CircleShape2D_krs6l")
disabled = true
debug_color = Color(0.5, 0, 0, 0.196078)

[node name="Attacker" type="CollisionShape2D" parent="Beast/HitboxComponent" index="1"]
debug_color = Color(0.5, 0, 0, 0.196078)

[node name="HurtboxComponent" parent="Beast" index="3" node_paths=PackedStringArray("sprites")]
script = ExtResource("4_pakg3")
sprites = NodePath("../Sprites")

[node name="SkeletonComponent" parent="Beast" index="4"]
modification_stack = SubResource("SkeletonModificationStack2D_jq6pb")

[node name="body1" type="Bone2D" parent="Beast/SkeletonComponent" index="0"]
position = Vector2(0, -131)
rest = Transform2D(1, 0, 0, 1, 0, -131)

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="Beast/SkeletonComponent/body1"]
remote_path = NodePath("../../../Sprites/body1")

[node name="body2" type="Bone2D" parent="Beast/SkeletonComponent/body1"]
position = Vector2(-86, -20)
rotation = 0.385832
rest = Transform2D(0.926486, 0.37633, -0.37633, 0.926486, -86, -20)

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="Beast/SkeletonComponent/body1/body2"]
remote_path = NodePath("../../../../Sprites/body2")

[node name="neck1" type="Bone2D" parent="Beast/SkeletonComponent/body1/body2"]
position = Vector2(-57.001, -34.001)
rotation = -1.22814
scale = Vector2(0.999996, 0.999996)
rest = Transform2D(0.335989, -0.941862, 0.941862, 0.335989, -57.001, -34.001)

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="Beast/SkeletonComponent/body1/body2/neck1"]
remote_path = NodePath("../../../../../Sprites/neck1")

[node name="neck2" type="Bone2D" parent="Beast/SkeletonComponent/body1/body2/neck1"]
position = Vector2(63.2159, -14.8364)
rotation = 1.38963
scale = Vector2(0.999998, 0.999998)
rest = Transform2D(0.180177, 0.983632, -0.983632, 0.180177, 63.2159, -14.8364)

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="Beast/SkeletonComponent/body1/body2/neck1/neck2"]
remote_path = NodePath("../../../../../../Sprites/neck2")

[node name="neck3" type="Bone2D" parent="Beast/SkeletonComponent/body1/body2/neck1/neck2"]
position = Vector2(-47.8745, -3.61382)
rotation = -0.0577674
scale = Vector2(0.999994, 0.999994)
rest = Transform2D(0.998326, -0.0577349, 0.0577349, 0.998326, -47.8745, -3.61382)

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="Beast/SkeletonComponent/body1/body2/neck1/neck2/neck3"]

[node name="head" type="Bone2D" parent="Beast/SkeletonComponent/body1/body2/neck1/neck2/neck3"]
position = Vector2(-35.3667, 33.5746)
rotation = -2.37668
scale = Vector2(0.999988, 0.999988)
rest = Transform2D(-0.721434, -0.692467, 0.692467, -0.721434, -35.3667, 33.5746)
metadata/_local_pose_override_enabled_ = true

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="Beast/SkeletonComponent/body1/body2/neck1/neck2/neck3/head"]
remote_path = NodePath("../../../../../../../../Sprites/head")

[node name="legR" type="Bone2D" parent="Beast/SkeletonComponent/body1"]
position = Vector2(-61, 23)
rotation = -0.299184
scale = Vector2(0.999925, 0.999925)
rest = Transform2D(0.955505, -0.294719, 0.294719, 0.955505, -61, 23)
metadata/_local_pose_override_enabled_ = true

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="Beast/SkeletonComponent/body1/legR"]
remote_path = NodePath("../../../../Sprites/legR")

[node name="shinR" type="Bone2D" parent="Beast/SkeletonComponent/body1/legR"]
position = Vector2(31.6396, 50.2908)
rotation = -0.128844
scale = Vector2(0.999981, 0.999981)
rest = Transform2D(0.991692, -0.128485, 0.128485, 0.991692, 31.6396, 50.2908)
metadata/_local_pose_override_enabled_ = true

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="Beast/SkeletonComponent/body1/legR/shinR"]
remote_path = NodePath("../../../../../Sprites/shinR")

[node name="footR" type="Bone2D" parent="Beast/SkeletonComponent/body1/legR/shinR"]
position = Vector2(-54.807, 82.4286)
rotation = -2.70057
scale = Vector2(0.999993, 0.999993)
rest = Transform2D(-0.904311, -0.426857, 0.426857, -0.904311, -54.807, 82.4286)
auto_calculate_length_and_angle = false
length = 100.0
bone_angle = 0.0
metadata/_local_pose_override_enabled_ = true

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="Beast/SkeletonComponent/body1/legR/shinR/footR"]
remote_path = NodePath("../../../../../../Sprites/footR")

[node name="legL" type="Bone2D" parent="Beast/SkeletonComponent/body1"]
position = Vector2(-57, 32)
rotation = -0.813743
scale = Vector2(0.999926, 0.999926)
rest = Transform2D(0.686731, -0.726809, 0.726809, 0.686731, -57, 32)
metadata/_local_pose_override_enabled_ = true

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="Beast/SkeletonComponent/body1/legL"]
remote_path = NodePath("../../../../Sprites/legL")

[node name="shinL" type="Bone2D" parent="Beast/SkeletonComponent/body1/legL"]
position = Vector2(-11.5829, 58.5507)
rotation = 0.703361
scale = Vector2(0.999986, 0.999986)
rest = Transform2D(0.762662, 0.646776, -0.646776, 0.762662, -11.5829, 58.5507)
metadata/_local_pose_override_enabled_ = true

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="Beast/SkeletonComponent/body1/legL/shinL"]
remote_path = NodePath("../../../../../Sprites/shinL")

[node name="footL" type="Bone2D" parent="Beast/SkeletonComponent/body1/legL/shinL"]
position = Vector2(-54.7352, 70.7807)
rotation = -3.03121
scale = Vector2(0.999966, 0.999966)
rest = Transform2D(-0.99388, -0.110154, 0.110154, -0.99388, -54.7352, 70.7807)
auto_calculate_length_and_angle = false
length = 100.0
bone_angle = 0.0
metadata/_local_pose_override_enabled_ = true

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="Beast/SkeletonComponent/body1/legL/shinL/footL"]
remote_path = NodePath("../../../../../../Sprites/footL")

[node name="HitboxTransform" type="RemoteTransform2D" parent="Beast/SkeletonComponent/body1/legL/shinL/footL"]
position = Vector2(58, 0)
scale = Vector2(1.00001, 1.00001)
remote_path = NodePath("../../../../../../HitboxComponent/Stomper")
update_rotation = false
update_scale = false

[node name="Sprites" parent="Beast" index="5"]
visible = false

[node name="body1" type="Sprite2D" parent="Beast/Sprites" index="0"]
position = Vector2(0, -131)
texture = ExtResource("7_7fdxh")

[node name="body2" type="Sprite2D" parent="Beast/Sprites" index="1"]
position = Vector2(-86, -151)
rotation = 0.385832
texture = ExtResource("7_7fdxh")

[node name="neck1" type="Sprite2D" parent="Beast/Sprites" index="2"]
position = Vector2(-126.015, -203.953)
rotation = -0.842308
scale = Vector2(0.999996, 0.999996)
texture = ExtResource("7_7fdxh")

[node name="neck2" type="Sprite2D" parent="Beast/Sprites" index="3"]
position = Vector2(-95.0003, -261)
rotation = 0.547322
scale = Vector2(0.999994, 0.999994)
texture = ExtResource("7_7fdxh")

[node name="head" type="Sprite2D" parent="Beast/Sprites" index="4"]
position = Vector2(-181, -276)
rotation = -0.388477
scale = Vector2(1.00001, 1.00001)
texture = ExtResource("7_7fdxh")

[node name="legL" type="Sprite2D" parent="Beast/Sprites" index="5"]
position = Vector2(-57, -99)
rotation = -0.747809
scale = Vector2(0.999925, 0.999925)
texture = ExtResource("7_7fdxh")

[node name="shinL" type="Sprite2D" parent="Beast/Sprites" index="6"]
position = Vector2(-25.6782, -48.199)
rotation = 0.12812
scale = Vector2(0.999896, 0.999896)
texture = ExtResource("7_7fdxh")

[node name="footL" type="Sprite2D" parent="Beast/Sprites" index="7"]
position = Vector2(-89, 15)
rotation = 3.0935
scale = Vector2(0.999871, 0.999871)
texture = ExtResource("7_7fdxh")

[node name="legR" type="Sprite2D" parent="Beast/Sprites" index="8"]
position = Vector2(-61, -108)
rotation = -0.365957
scale = Vector2(0.99992, 0.99992)
texture = ExtResource("7_7fdxh")

[node name="shinR" type="Sprite2D" parent="Beast/Sprites" index="9"]
position = Vector2(-13.4633, -72.3642)
rotation = -0.142523
scale = Vector2(0.999871, 0.999871)
texture = ExtResource("7_7fdxh")

[node name="footR" type="Sprite2D" parent="Beast/Sprites" index="10"]
position = Vector2(-56, 17)
rotation = -3.14159
scale = Vector2(0.999877, 0.999877)
texture = ExtResource("7_7fdxh")

[node name="footLTarget" type="Node2D" parent="Beast/IKTargets" index="0"]
position = Vector2(-89, 15)

[node name="footLLookAt" type="Node2D" parent="Beast/IKTargets/footLTarget"]
position = Vector2(-187, 9)

[node name="footRTarget" type="Node2D" parent="Beast/IKTargets" index="1"]
position = Vector2(-56, 17)

[node name="footRLookAt" type="Node2D" parent="Beast/IKTargets/footRTarget"]
position = Vector2(-205, 0)

[node name="headTarget" type="Node2D" parent="Beast/IKTargets" index="2"]
position = Vector2(-190, -271)

[node name="headLookAt" type="Node2D" parent="Beast/IKTargets/headTarget"]
position = Vector2(0, 78)

[node name="GooblinLeapTarget" parent="Beast" index="7"]
position = Vector2(-284, -67)

[editable path="Beast"]
